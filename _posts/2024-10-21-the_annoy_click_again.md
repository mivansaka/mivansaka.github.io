---
layout: post
title: 再说说智能灯与智能开关
date: 2024-10-21 10:28:09 +0800
---
昨日又花了一点点时间研究了一下家里的智能灯和开关的问题又有一点新的发现，快速说一下。

和之前说过的一样如果灯具和开关都是使用aqara的稍微新一点点的产品，则有火星连接可以顺畅的连接，完全不用担心开关断电以后灯具掉线的问题。
而yeelight对于这个的解决方案是使用凌动技术，配置凌动开关来进行，之前一直以为凌动开关是某种特殊专利和aqara的火星技术一样，但是昨天仔细看了看实际上普通开关加上个弹簧就可以实现凌动了。依靠的就是开关实际上是处于常闭的状态，按下开关里面的弹簧快速回弹，在瞬间是一个闭-开-闭的脉冲信号，支持凌动技术的灯具实则是依靠开关的脉冲信号来进行开关的。Aqara也很好，在智能开关的模式里面就自带一个脉冲模式，易来有凌动的专利，Aqara等于是依靠这种别扭的方式完成了对非aqara灯具的智能开关和智能灯的兼容。
aqara的火星技术可能是依靠开关按下的时候和灯具单独做通讯完成的，因为开启了火星智能负载的开关按下去的时候实际上是没有任何声音的，对于普通负载和脉冲信号的形式按下去都能明显听到接触器吸合的声音。

**又一个问题**
智能灯和智能开关兼得的事情看似是解决了，但是对于智能控制上的强迫症实际上并不友好，假定都是基于HomeKit的形式来说，绑定到同一个房间里面的有灯的开关和灯本身。这就意味这实际上在HomeKit中使用两个不同的实体管理着对我来说是一个东西的方式。
如果更高阶一点使用home assistant来管理这个灯和开关，依旧是相同的问题，和火星技术不同，灯和开关的开启关闭状态在火星技术上是联动起来的，但是发送脉冲的智能开关不是，如果使用开关发射脉冲将灯打开，开关的状态为开；但是关灯的时候选择的是灯的这个实体关闭，则灯已经关上，但是开关的状态并未同步起来，开关仍旧显示的是开的状态。因此解决办法只能是在homeassistant 里面把开关的状态隐藏起来眼不见心不烦，再单独把灯通过home-bridge转过去，用鸵鸟埋沙的方式来做这件事情了。

PS：现在米家的很多产品都从zigbee转投蓝牙mesh了，价格也很好，但是想着为了用蓝牙mesh的产品还得买个小米的蓝牙网关家里塞着总觉得不爽，昨天在和开关、智能灯搏斗的时候，发现这几个易来的吸顶灯都可以做蓝牙网关用，真是震惊到了，感觉可以试试。